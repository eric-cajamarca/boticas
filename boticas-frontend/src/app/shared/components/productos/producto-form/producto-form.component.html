<h4>Edición de productos</h4>
<br>

<form [formGroup]="form" class="flex flex-col gap-3">

  <!-- Código -->
  <mat-form-field appearance="outline">
    <mat-label>Código</mat-label>
    <input matInput formControlName="Codigo" />
  </mat-form-field>

  <!-- Código de Barras -->
  <mat-form-field appearance="outline">
    <mat-label>Código de Barras</mat-label>
    <input matInput formControlName="CodigoBarras" />
  </mat-form-field>

  <!-- Nombre -->
  <mat-form-field appearance="outline">
    <mat-label>Nombre</mat-label>
    <input matInput formControlName="Nombre" />
  </mat-form-field>

  <!-- Descripción -->
  <mat-form-field appearance="outline">
    <mat-label>Descripción</mat-label>
    <textarea matInput formControlName="Descripcion"></textarea>
  </mat-form-field>

  <!-- Precios y Stock -->
  <div class="grid grid-cols-2 gap-3">
    <mat-form-field appearance="outline">
      <mat-label>Precio Compra</mat-label>
      <input matInput type="number" formControlName="PrecioCompra" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Precio Venta</mat-label>
      <input matInput type="number" formControlName="PrecioVenta" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Stock Mínimo</mat-label>
      <input matInput type="number" formControlName="StockMin" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Stock Máximo</mat-label>
      <input matInput type="number" formControlName="StockMax" />
    </mat-form-field>
  </div>

  <!-- Datos farmacéuticos -->
  <mat-form-field appearance="outline">
    <mat-label>Concentración</mat-label>
    <input matInput formControlName="Concentracion" />
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Forma</mat-label>
    <input matInput formControlName="Forma" />
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Registro Sanitario</mat-label>
    <input matInput formControlName="RegistroSanitario" />
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Digemid</mat-label>
    <input matInput formControlName="Digemid" />
  </mat-form-field>

  <!-- Checkboxes -->
  <mat-checkbox formControlName="RequiereReceta">Requiere Receta</mat-checkbox>
  <mat-checkbox formControlName="Controlado">Controlado</mat-checkbox>

  <!-- Selects para claves foráneas -->
  <mat-form-field appearance="outline">
    <mat-label>Categoría</mat-label>
    <mat-select formControlName="idCategoria">
      <mat-option *ngFor="let cat of categorias" [value]="cat.idCategoria">
        {{ cat.nombre }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Presentación</mat-label>
    <mat-select formControlName="idPresentacion">
      <mat-option *ngFor="let pre of presentaciones" [value]="pre.idPresentacion">
        {{ pre.nombre }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Marca</mat-label>
    <mat-select formControlName="idMarca">
      <mat-option *ngFor="let marca of marcas" [value]="marca.idMarca">
        {{ marca.nombre }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Laboratorio</mat-label>
    <mat-select formControlName="idLaboratorio">
      <mat-option *ngFor="let lab of laboratorios" [value]="lab.idLaboratorio">
        {{ lab.nombre }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Principio Activo</mat-label>
    <mat-select formControlName="idPrincipio">
      <mat-option *ngFor="let principio of principios" [value]="principio.idPrincipio">
        {{ principio.nombre }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Vía de Administración</mat-label>
    <mat-select formControlName="idVia">
      <mat-option *ngFor="let via of vias" [value]="via.idVia">
        {{ via.nombre }}
      </mat-option>
    </mat-select>
  </mat-form-field>
</form>

<!-- Botones -->
<div mat-dialog-actions align="end">
  <button mat-button (click)="ref.close()">Cancelar</button>
  <button mat-raised-button color="primary" [disabled]="form.invalid" (click)="save()">Guardar</button>
</div>
